#include <stdio.h>


// Define a quantidade de cédulas de avaliação recebidas
#define QTDE_CEDULAS 100


// Define a quantidade de obras disponíveis no museu
#define QTDE_OBRAS    20


/* Cada linha da matriz abaixo equivale a uma cédula de avaliação,
    E cada coluna corresponde a uma determinada obra.
    Foi inserido um comentário, com números, dentro dos colchetes
    para auxiliar na identificação da coluna/obra correspondente.
*/
int cedulas_avaliacao[QTDE_CEDULAS][QTDE_OBRAS] = {
//   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
    {5, 2, 1, 2, 4, 3, 2, 1, 3, 4, 1, 2, 3, 4, 2, 1, 3, 0, 1, 4},
    {5, 2, 0, 0, 3, 2, 1, 3, 4, 2, 0, 3, 4, 1, 0, 3, 4, 2, 3, 1},
    {4, 2, 1, 3, 4, 1, 2, 3, 4, 0, 0, 1, 4, 2, 1, 3, 4, 1, 2, 0},
    {4, 2, 3, 1, 4, 2, 1, 3, 4, 1, 0, 3, 4, 2, 3, 1, 4, 0, 1, 3},
    {0, 1, 0, 3, 4, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1},
    {5, 2, 1, 4, 3, 2, 0, 0, 3, 4, 1, 2, 3, 0, 0, 3, 1, 4, 2, 1},
    {5, 0, 1, 2, 3, 4, 0, 3, 1, 0, 2, 1, 3, 4, 1, 2, 3, 0, 2, 3},
    {0, 2, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2},
    {5, 2, 2, 0, 1, 4, 2, 0, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 1},
    {5, 2, 1, 2, 3, 4, 2, 3, 0, 0, 2, 1, 3, 0, 1, 2, 3, 4, 0, 3},
    {5, 0, 2, 4, 1, 0, 4, 3, 2, 1, 3, 4, 2, 1, 3, 4, 1, 4, 3, 2},
    {5, 2, 3, 2, 1, 3, 4, 2, 1, 3, 4, 1, 2, 3, 4, 0, 3, 0, 4, 2},
    {5, 1, 4, 1, 2, 3, 4, 2, 3, 1, 0, 2, 1, 3, 0, 0, 2, 3, 4, 2},
    {5, 1, 4, 2, 1, 3, 4, 1, 2, 0, 4, 2, 3, 1, 4, 2, 1, 3, 4, 1},
    {0, 1, 4, 2, 3, 1, 4, 0, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 3, 4},
    {5, 2, 4, 0, 3, 2, 1, 4, 3, 2, 1, 2, 3, 4, 1, 2, 3, 4, 2, 3},
    {5, 2, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 0, 2, 1, 0, 4, 1, 2},
    {5, 2, 0, 3, 1, 4, 0, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 1},
    {5, 2, 1, 2, 3, 4, 2, 3, 0, 4, 2, 1, 0, 4, 1, 2, 3, 4, 2, 3},
    {5, 2, 2, 1, 3, 4, 0, 2, 3, 4, 2, 3, 2, 3, 1, 4, 2, 1, 3, 4},
    {5, 2, 3, 0, 0, 3, 2, 1, 0, 0, 1, 2, 0, 0, 0, 1, 3, 4, 1, 4},
    {5, 2, 1, 4, 3, 2, 1, 3, 4, 2, 1, 0, 4, 0, 2, 3, 4, 2, 3, 1},
    {4, 2, 1, 3, 4, 1, 2, 3, 4, 0, 3, 0, 4, 2, 1, 3, 4, 0, 2, 3},
    {4, 2, 3, 1, 4, 2, 1, 3, 0, 1, 2, 0, 4, 2, 3, 1, 4, 2, 1, 3},
    {4, 1, 2, 3, 4, 2, 3, 0, 4, 2, 1, 0, 4, 1, 2, 0, 4, 2, 0, 1},
    {5, 2, 4, 1, 3, 2, 0, 4, 3, 0, 1, 2, 3, 4, 1, 2, 3, 4, 2, 3},
    {0, 2, 2, 1, 3, 4, 0, 2, 3, 4, 2, 3, 1, 4, 2, 1, 3, 4, 0, 2},
    {5, 2, 2, 3, 1, 0, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 1},
    {5, 2, 0, 0, 3, 4, 0, 3, 1, 4, 2, 1, 3, 4, 1, 0, 3, 4, 2, 3},
    {5, 2, 2, 0, 3, 4, 1, 2, 3, 4, 2, 0, 4, 2, 1, 3, 4, 1, 0, 3},
    {5, 2, 3, 0, 4, 0, 0, 0, 3, 4, 1, 2, 3, 0, 2, 1, 0, 4, 1, 4},
    {5, 2, 1, 4, 3, 2, 1, 3, 4, 2, 0, 0, 4, 1, 2, 0, 4, 2, 3, 1},
    {4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 0, 3, 4, 0, 2, 3},
    {0, 2, 3, 0, 4, 2, 1, 0, 4, 0, 2, 3, 0, 2, 0, 1, 4, 2, 1, 3},
    {4, 0, 2, 3, 4, 2, 3, 1, 0, 2, 0, 3, 4, 4, 2, 3, 0, 4, 2, 1},
    {4, 1, 2, 3, 2, 1, 0, 3, 2, 1, 3, 4, 0, 1, 0, 4, 1, 0, 3, 2},
    {5, 2, 3, 2, 1, 3, 0, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2},
    {5, 1, 0, 1, 2, 0, 4, 2, 3, 0, 4, 2, 1, 3, 0, 1, 2, 0, 0, 2},
    {5, 1, 4, 0, 1, 3, 4, 1, 2, 3, 4, 0, 3, 1, 4, 2, 1, 3, 4, 1},
    {4, 1, 4, 0, 0, 1, 4, 2, 1, 3, 4, 4, 3, 4, 1, 4, 3, 2, 0, 4},
    {0, 2, 4, 1, 0, 3, 2, 1, 3, 0, 1, 2, 3, 4, 2, 1, 3, 4, 1, 4},
    {5, 2, 1, 4, 0, 2, 1, 3, 4, 2, 0, 3, 4, 1, 2, 3, 4, 2, 3, 1},
    {4, 0, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 1, 3, 0, 1, 2, 3},
    {4, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2, 0, 4, 2, 3, 0, 0, 2, 1, 0},
    {4, 0, 2, 3, 4, 2, 3, 1, 4, 2, 1, 3, 4, 2, 1, 3, 4, 2, 1, 3},
    {4, 1, 0, 0, 1, 4, 0, 2, 4, 0, 3, 0, 1, 2, 3, 4, 1, 2, 3, 4},
    {4, 1, 0, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 0, 1, 3, 4},
    {5, 2, 3, 4, 2, 3, 1, 4, 2, 0, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4},
    {0, 0, 3, 4, 1, 2, 3, 4, 2, 0, 0, 4, 2, 1, 3, 4, 1, 2, 3, 4},
    {4, 1, 1, 4, 0, 1, 3, 4, 0, 2, 3, 4, 3, 2, 1, 3, 4, 0, 1, 3},
    {5, 2, 3, 4, 0, 2, 1, 4, 3, 2, 0, 2, 3, 4, 1, 2, 3, 4, 2, 3},
    {5, 2, 2, 1, 3, 4, 1, 2, 3, 4, 2, 0, 1, 4, 2, 1, 3, 0, 1, 2},
    {5, 2, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 1},
    {5, 2, 1, 2, 3, 4, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3},
    {5, 2, 2, 0, 0, 4, 0, 2, 3, 4, 0, 3, 4, 1, 3, 0, 1, 2, 3, 4},
    {4, 1, 2, 3, 2, 1, 4, 3, 2, 1, 0, 4, 2, 0, 3, 0, 1, 4, 3, 2},
    {5, 2, 3, 2, 1, 3, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2},
    {5, 1, 4, 1, 2, 3, 4, 2, 3, 0, 4, 2, 1, 3, 0, 1, 2, 3, 4, 2},
    {5, 0, 4, 2, 1, 3, 4, 0, 0, 0, 4, 2, 3, 1, 4, 0, 1, 3, 0, 1},
    {4, 1, 4, 2, 3, 1, 4, 2, 1, 3, 4, 2, 3, 4, 2, 3, 1, 4, 2, 0},
    {5, 2, 4, 1, 4, 3, 2, 1, 3, 4, 1, 2, 3, 4, 2, 1, 3, 4, 1, 4},
    {5, 2, 1, 4, 3, 2, 1, 3, 0, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1},
    {4, 2, 1, 3, 4, 1, 2, 3, 0, 2, 3, 1, 4, 0, 1, 0, 4, 1, 0, 0},
    {4, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 0, 0, 2, 1, 3},
    {4, 1, 2, 3, 4, 2, 0, 0, 0, 2, 1, 3, 4, 4, 1, 2, 3, 2, 0, 2},
    {5, 0, 3, 4, 3, 2, 1, 4, 3, 2, 1, 2, 3, 4, 0, 2, 3, 4, 2, 3},
    {5, 2, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2},
    {5, 2, 2, 3, 1, 4, 2, 1, 0, 4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 0},
    {0, 2, 0, 0, 3, 4, 2, 0, 1, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3},
    {5, 2, 2, 1, 3, 4, 1, 2, 0, 4, 2, 0, 0, 2, 1, 3, 4, 1, 2, 3},
    {0, 2, 4, 1, 3, 2, 1, 0, 3, 2, 1, 2, 3, 4, 1, 0, 3, 4, 2, 0},
    {5, 2, 2, 1, 3, 4, 1, 2, 3, 0, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2},
    {5, 0, 2, 3, 1, 4, 2, 1, 3, 4, 1, 0, 3, 4, 2, 0, 1, 4, 2, 0},
    {5, 2, 1, 0, 0, 4, 0, 0, 0, 4, 2, 1, 3, 0, 1, 2, 3, 4, 2, 0},
    {5, 2, 2, 0, 0, 4, 0, 2, 3, 4, 0, 3, 4, 1, 3, 4, 1, 2, 3, 4},
    {5, 2, 0, 2, 4, 3, 2, 1, 3, 4, 1, 2, 3, 4, 2, 0, 3, 4, 1, 4},
    {5, 2, 1, 4, 3, 2, 1, 0, 4, 2, 1, 3, 0, 1, 2, 3, 4, 2, 3, 1},
    {4, 0, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 0, 1, 3, 4, 1, 2, 3},
    {4, 2, 3, 1, 4, 2, 1, 3, 4, 0, 2, 3, 4, 2, 3, 0, 4, 2, 1, 3},
    {4, 1, 2, 3, 4, 2, 3, 1, 4, 2, 0, 0, 4, 2, 3, 1, 3, 1, 4, 2},
    {4, 1, 3, 4, 1, 4, 3, 2, 1, 4, 3, 2, 1, 0, 4, 2, 1, 0, 4, 0},
    {0, 1, 4, 2, 1, 3, 4, 1, 2, 3, 4, 0, 3, 1, 4, 2, 1, 3, 0, 0},
    {4, 1, 4, 2, 3, 1, 4, 0, 1, 3, 4, 0, 2, 3, 0, 2, 3, 1, 4, 2},
    {5, 1, 0, 1, 2, 3, 4, 2, 3, 1, 4, 0, 1, 0, 4, 1, 2, 3, 4, 2},
    {5, 0, 4, 0, 1, 3, 4, 1, 2, 3, 4, 2, 1, 3, 4, 0, 2, 3, 4, 0},
    {5, 2, 0, 1, 0, 2, 1, 4, 0, 2, 1, 2, 3, 4, 1, 2, 3, 4, 2, 3},
    {5, 2, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 0, 1, 3, 4, 1, 2},
    {0, 2, 2, 3, 1, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3, 1, 4, 0, 1},
    {0, 2, 1, 2, 3, 4, 2, 3, 0, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2, 3},
    {5, 2, 2, 0, 3, 4, 1, 2, 3, 4, 2, 3, 1, 3, 4, 0, 2, 3, 4, 0},
    {5, 2, 3, 2, 0, 0, 2, 1, 3, 4, 1, 2, 3, 4, 2, 1, 0, 0, 1, 4},
    {5, 2, 1, 4, 3, 2, 1, 3, 4, 2, 1, 3, 4, 1, 2, 3, 4, 0, 3, 1},
    {4, 2, 1, 3, 4, 0, 2, 3, 4, 2, 3, 0, 4, 2, 1, 3, 0, 1, 2, 0},
    {4, 2, 3, 1, 4, 0, 0, 3, 4, 0, 2, 3, 4, 0, 3, 1, 0, 2, 0, 3},
    {4, 1, 2, 0, 4, 2, 3, 1, 4, 0, 1, 3, 4, 0, 1, 0, 2, 1, 3, 4},
    {4, 1, 0, 4, 1, 4, 3, 0, 1, 4, 0, 2, 1, 3, 0, 2, 0, 3, 0, 2},
    {5, 1, 4, 2, 1, 3, 4, 1, 0, 3, 4, 2, 3, 1, 4, 2, 1, 3, 4, 1},
    {4, 1, 0, 2, 0, 1, 4, 2, 1, 3, 4, 0, 2, 3, 4, 2, 3, 1, 0, 2},
    {5, 0, 4, 0, 2, 3, 4, 2, 0, 1, 4, 2, 1, 3, 4, 1, 2, 3, 4, 2},
    {0, 1, 4, 0, 0, 3, 4, 1, 2, 3, 4, 2, 3, 1, 2, 0, 4, 2, 0, 0}
};


// Estrutura para agrupar as informações de uma obra
struct Obra {
    int id;
    float media;
    int votos_validos;
};


// Array com informações de todas as obras
struct Obra lista_obras[QTDE_OBRAS];


// Calcular as médias e os votos válidos para cada obra
void calcular_medias() {
    int num_obra, num_cedula;
    int soma_pontos, qtde_votos;
    int voto_selecionado;
    float media_votos;

    // Verificar uma obra (coluna) de cada vez
    for (num_obra = 0; num_obra < QTDE_OBRAS; num_obra++) {
        soma_pontos = 0;
        qtde_votos = 0;

        // Passar por cada cédula (linha) para verificar os votos
        for (num_cedula = 0; num_cedula < QTDE_CEDULAS; num_cedula++) {
            // Ler o voto correpondente na matriz
            voto_selecionado = cedulas_avaliacao[num_cedula][num_obra];

            // Se o voto for válido (não estiver zerado)
            if (voto_selecionado != 0) {
                // Soma-se os pontos
                soma_pontos += voto_selecionado;
                // E incrementa a quantidade de votos
                qtde_votos++;
            }
        }

        // Calcular a média
        if (qtde_votos == 0) {
            media_votos = 0;
        } else {
            media_votos =  (float) soma_pontos / qtde_votos;
        }

        // Preencher a estrutura Obra com os resultados
        lista_obras[num_obra].id = num_obra + 1;
        lista_obras[num_obra].media = media_votos;
        lista_obras[num_obra].votos_validos = qtde_votos;
    }
}


// Ordenar as obras por média em ordem decrescente
void ordenar_obras_por_media() {
    int i, j;
    struct Obra obra_temp;

    for (i = 0; i < QTDE_OBRAS - 1; i++) {
        for (j = 0; j < QTDE_OBRAS - i - 1; j++) {
            // Compara se a média da obra selecionada com a da próxima
            if (lista_obras[j].media < lista_obras[j + 1].media) {
                // Trocar a ordem das obras se a próxima for menor
                obra_temp = lista_obras[j];
                lista_obras[j] = lista_obras[j + 1];
                lista_obras[j + 1] = obra_temp;
            }
        }
    }
}


// Mostrar as obras no prompt
void mostrar_obras() {
    int obra;

    // Exibir as informações de cada obra
    for (obra = 0; obra < QTDE_OBRAS; obra++) {
        printf("    Obra: %02d    Média: %.3f    Qtde votos: %d\n",
            lista_obras[obra].id,
            lista_obras[obra].media,
            lista_obras[obra].votos_validos);
    }
    printf("\n");
}


int main() {
    // Calcular as médias e os votos válidos por obra
    calcular_medias();

    // Ordenar as obras por média em ordem decrescente
    ordenar_obras_por_media();

    // Mostrar as obras ordenadas no prompt
    printf("Obras ordenadas por pontuação:\n");
    mostrar_obras();

    return 0;
}

